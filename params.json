{"name":"Pries.github.io","tagline":"My useful programming pages geared towards scientific programming","body":"# How to do embarrassingly parallel processing in python across multiple cores and multiple computers\r\n\r\n## What types of code is this good for?\r\n\r\nThis sort of code is good for running embarrassingly parallel code.  Embarrassingly parallel code is where the the results from one calculation don't effect the result from other calculations.  \r\n\r\nExample of embarrassingly parallel code:\r\n\r\n```python\r\nimport numpy as np\r\nx=np.arange(0,2*pi, 0.01)\r\nn=len(x)\r\ny=np.zeros(n)\r\n\r\nfor i in range(n):\r\n  y[i]=np.sin(x[i])\r\n````\r\n\r\n`sin(x[i])` doesn't care what `sin(x[i-1])` is.  So you could compute the values in any order.  Now this is a bad example since `sin` is not terribly computational intense compared to the overhead of parallel processing, but it gives you an idea of the sort of thing I'll be telling you python can trivially parallelize.\r\n\r\n## Setup (1 computer)\r\nWhat you need:\r\n*  Ipython (that's it!)\r\n\r\nInstructions:\r\n1. at the command line type:\r\n```ipcluster start --n=4```\r\n\r\nThis sets up a cluster of processes for Ipython.  `n` is the number of processes to start, which should be equal to the number of cores you want to use.  Open another terminal and start and ipython (or ipython+pylab) session.\r\n\r\n## How to run code in parallel (same for both single machine and multiple machines!!)\r\n\r\nSo to work this you need to set up your function to use python's map function.  \r\n\r\n\r\n\r\n## What you need to get started (multiple computers)\r\n1. IP address of the host computer\r\n1. Know where the ipython directory is on each computer\r\n1. All computers in the cluster can see the host computer\r\n1. Understand how python working directory and `$PYTHONPATH` affect how your code works\r\n**Note**:  I don't know if this will work across different architectures.  My Mac wouldn't play nice with the three computers running Linux and I haven't had a chance to troubleshoot it....","google":"UA-43010472-1","note":"Don't delete this file! It's used internally to help with page regeneration."}